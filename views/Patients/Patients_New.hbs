<h2 class="page-title-text">{{title}}</h2>
<br />
<form id="form">
    <fieldset>
        <legend><strong>Add {{tableNameSingular}}</strong></legend>
        <table>
            <tr>
                <td><label for="firstName">First Name: </label> <input type="text" name="firstName" id="firstName"></td>
            </tr>
            <tr>
                <td><label for="lastName">Last Name: </label> <input type="text" name="lastName" id="lastName"></td>
            </tr>
            <tr>
                <td><label for="dateOfBirth">Date of Birth: </label> <input type="date" name="dateOfBirth"
                        id="dateOfBirth"></td>
            </tr>
            <tr>
                <td><label for="email">Email: </label> <input type="email" name="email" id="email">
                </td>
            </tr>
            <tr>
                <td><label for="phoneNumber">Phone Number: </label> <input type="tel" name="phoneNumber"
                        id="phoneNumber"></td>
            </tr>
            <tr>
                <td><label for="address">Address: </label> <input type="text" name="address" id="address"></td>
            </tr>
        </table>
        <br />
        <div>
            <input type="submit" value="Add {{tableNameSingular}}">
            <input type="button" value="Cancel"
                onclick="window.location = window.location.origin + window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'))">
        </div>
    </fieldset>
</form>
<script>
    document.getElementById("form").addEventListener("submit", async (event) => {
        try {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());
            await API_AddPatient(data.firstName, data.lastName, data.dateOfBirth, data.email, data.phoneNumber, data.address);
            window.location = window.location.origin + window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
        } catch (err) {
            const errMsg = `ERROR: ${err.message || err}`;
            console.error(errMsg);
            alert(errMsg);
        }
    });
</script>